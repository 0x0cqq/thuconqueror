# 程序设计实训——战棋大作业文档

软件03 陈启乾 2020012385

[TOC]

## 游戏设定

### 游戏名称

疫情防控保卫战战棋

### 游戏背景

在 0202 年，全球爆发了新型冠状病毒肺炎。这场疫情直至 1202 年 8 月仍未结束。C 国重要高等学府 T 大，疫情防控 T 大保卫战一触即发。

现在假如你是 T 大校长 Q Boss，请你来指挥学校，与病毒战斗吧！

## 游戏功能实现情况

| 功能要求（50分）                                             | 完成情况                   | 图片概览 |
| ------------------------------------------------------------ | :------------------------- | -------- |
| **界面、交互设计（6分）**                                    |                            |          |
| 标题界面和游戏界面（2分）                                    | 已经实现                           |          |
| 游戏界面可以查看角色和敌人的详细信息（2分）                  | 已经实现                   |          |
| 通过鼠标或键盘实现角色控制以及战斗菜单选择（2分）            | 已经实现                   |          |
| 教程界面或游戏UI说明界面来展示游戏如何操作（1分）            |                            |          |
| **地形设计（4分）**                                          |                            |          |
| 网格状地图（任意规则形状均可，如四边形或六边形）（2分）      | 已经实现，六边形地图       |          |
| 阻挡型地形（角色无法越过）（2分）                            | 已经实现                   |          |
| 损伤型地形（角色...损失生命值）（1分）                       |                            |          |
| 妨碍型地形（角色...移动的最大距离减少）（1分）               |                            |          |
| **敌我方角色设计（11分）**                                   |                            |          |
| 基本属性：生命值、攻击力、机动性、攻击范围（2分）            | 已经实现                   |          |
| 设计至少3种不同特点的角色（9分）                             |                         |          |
| 其他属性：防御力、技能等设定（4分）                          |                            |          |
| 其他职能角色，如治疗型角色（2分）                            |                            |          |
| 敌方boss型敌人设计（1分）                                    |                            |          |
| **战斗设计（10分）**                                         |                            |          |
| 回合制机制，每回合每个角色可以各移动和攻击一次（2分）        |                            |          |
| 在地图上可视化可移动的范围和可攻击的范围（4分）              | 已经实现（攻击范围未实现） |          |
| 基本的行动顺序，即一方所有角色行动结束后轮到另一方行动（2分） | 已经实现                   |          |
| 战斗伤害结算（2分）                                          | 已经实现                   |          |
| 按照敌我方所有角色的行动速度决定行动顺序（1分）              |                            |          |
| 视野：角色在一定距离内才能发现对方角色（3分）                |                            |          |
| **关卡设计（6分）**                                          |                            |          |
| 至少设计两个关卡，有不同的地形，角色有不同限制（4分）        |                            |          |
| 基本关卡通关判定和失败判定，即敌方全灭或我方全灭（2分）      |                            |          |
| rogue-like要素，即一定程度内随机生成地形和敌人以及对我方可放置角色种类和数量的限制条件（3分） |                            |          |
| 通过合理设计上一点来使得关卡难度随关卡进行逐渐提高（1分）    |                            |          |
| 其他通关判定方式，如占领特定位置或击败敌方boss（1分）        |                            |          |
| **敌方AI设计（4分）**                                        |                            |          |
| 基本的行动逻辑，即会不断靠近我方角色并发起攻击（4分）        |                            |          |
| 为不同的敌人类型设计不同的行动策略（2分）                    |                            |          |
| 设计不同的难度，难度越高敌方行动逻辑越复杂（2分）            |                            |          |
| **其他要求（9分）**                                          |                            |          |
| 游戏背景音乐、音效（2分）                                    |                            |          |
| 图片素材（请自行寻找）（3分）                                |                            |          |
| 动画效果：角色移动动画、战斗效果等（4分）                    | 已经实现                   |          |
| 剧情设计（2分）                                              |                            |          |
| 战斗复盘（3分）                                              |                            |          |

> 功能要求包含基本要求和提高要求，完成基本要求就可以最高得到50分，完成提高要求有额外加分，但需要注意，提高要求会根据完成度和质量进行赋分，分值不会超过该项的分数。另外，额外加分仅仅作用于大作业本身分数。加分不会使大作业本身分数突破限制，即当大作业本身分数超过 100 分时，在总成绩计算中大作业按 100 分进入加权计算。

## 游戏代码实现情况

| 代码要求（20分）                                        |          |      |
| ------------------------------------------------------- | -------- | ---- |
| 要求使⽤C++和QT进⾏编写。                               |          |      |
| 要求使⽤⾯向对象的编程思想（5分）                       | 已经实现 |      |
| 代码应当有统⼀的⻛格（4分）                             | 已经实现 |      |
| 代码应当包含必要的注释（4分）                           |          |      |
| 代码应该合理设计类之间的关系以保证类的良好封装性（2分） | 已经实现 |      |
| 程序应当拥有较⾼的运⾏效率（5分）                       | 已经实现 |      |

## 游戏技术路线

游戏图形采用 Qt 5.15.2 中的 Graphics Framework 搭建。

游戏采用了面向对象的编程方法，类的构造结构大致如下。

为了构造一局游戏，有三种类会被创造出来：

1. 总体管理游戏，沟通游戏逻辑、游戏图形界面。这种包括：`Game` 类、`GraphView` 类。
2. 创建、管理图形界面，接收并判断用户图形界面输入指令的合法性，并通过图形化的方法给出游戏运行的结果。这种包括：`Field` 类，`Block`类，`Unit` 类。
3. 创建、计算游戏逻辑，接收图形界面给出的游戏指令，计算得到游戏局面状态的变化。这种包括：`GraphField` 类，`GraphBlock`类，`GraphUnit` 类。
4. 管理游戏数据，提供给以上 2 和 3 使用，并且由 1 负责管理。这种包括：`UnitStatus` 类，`BlockStatus` 类。

